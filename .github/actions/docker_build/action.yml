name: "docker-build"
description: "docker build"
inputs:
    username:
        required: true
    password:
        required: true
# outputs:
#     random-number:
#         description: "Random number"
#         value: ${{ steps.random-number-generator.outputs.random-number }}
runs:
    using: "composite"
    steps:
        - name: Login to GitHub Container Registry
          uses: docker/login-action@v2
          with:
              registry: ghcr.io
              username: ${OWNER,,}
              password: ${{ inputs.password }}
          env:
              OWNER: ${{ inputs.username }}
          shell: bash
        - run: docker build . --tag ghcr.io/${OWNER,,}/example_image:latest
          env:
              OWNER: ${{ inputs.username }}
          shell: bash
        - name: Build and push Docker image to GitHub Container Registry
          uses: docker/build-push-action@v3
          with:
              push: true
              tags: |
                  ghcr.io/${OWNER,,}/example_image:latest
          env:
              OWNER: ${{ inputs.username }}
              # labels: |
              #     org.opencontainers.image.source=${{ github.event.repository.clone_url }}
              # cache-from: type=local,src=/tmp/.buildx-cache
              # cache-to: type=local,dest=/tmp/.buildx-cache-new
              # build-args: |
              #     RUBY_VERSION=${{ steps.prepare_build_arg.outputs.RUBY_VERSION }}
              #     BUNDLER_VERSION=${{ steps.prepare_build_arg.outputs.BUNDLER_VERSION }}
